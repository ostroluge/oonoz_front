<div ng-include="'views/menu.html'"></div>

<div class="contenuOnline"  xmlns="http://www.w3.org/1999/xhtml">

    <form name="signupForm" ng-submit="submit()" class="createAccountconteneur">
        <div class="titreFormAdminCreateAccount">Créer un nouveau compte utilisateur</div>

        <div class="ligneFormAdminCreateAccount">
            <label>Nom d'utilisateur </label>
            <input type="text" name="username" id="username" ng-model="username" class="inputFormAdminCreateAccount"
                   ng-minlength="4" ng-maxlength="20" ng-pattern="/^[A-z][a-zA-Z0-9À-ÿ]*$/" required>
        </div>
        <span class="errorForm" ng-show="signupForm.username.$error.required && signupForm.username.$dirty">Champ obligatoire</span>
        <span class="errorForm" ng-show="!signupForm.username.$error.minLenght && !signupForm.username.$error.maxLength &&
                    signupForm.username.$error.pattern && signupForm.username.$dirty">Doit commencer par une lettre et contenir uniquement des lettres et chiffres</span>
        <span class="errorForm" ng-show="!signupForm.username.$error.required
                    && (signupForm.username.$error.minlength || signupForm.username.$error.maxlength)
                    && signupForm.username.$dirty"> L'identifiant doit contenir 4 à 20 caractères.</span>


        <div class="ligneFormAdminCreateAccount">
            <label>Prénom </label>
            <input type="text" name="firstName" id="firstName" ng-model="firstName" class="inputFormAdminCreateAccount"
                   ng-minlength="3" ng-maxlength="40" required>
        </div>
        <span class="errorForm" ng-show="signupForm.firstName.$error.required && signupForm.firstName.$dirty">Champ obligatoire</span>
        <span class="errorForm" ng-show="!signupForm.firstName.$error.required
                    && (signupForm.firstName.$error.minlength || signupForm.firstName.$error.maxlength)
                    && signupForm.firstName.$dirty"> Le prénom doit contenir 3 à 40 caractères.</span>


        <div class="ligneFormAdminCreateAccount">
            <label>Nom </label>
            <input type="text" name="lastName" id="lastName" ng-model="lastName" class="inputFormAdminCreateAccount"
                   ng-minlength="3" ng-maxlength="40" required>
        </div>
        <span class="errorForm" ng-show="signupForm.lastName.$error.required && signupForm.lastName.$dirty">Champ obligatoire</span>
        <span class="errorForm" ng-show="!signupForm.lastName.$error.required
                    && (signupForm.lastName.$error.minlength || signupForm.lastName.$error.maxlength)
                    && signupForm.lastName.$dirty"> Le nom doit contenir 3 à 40 caractères.</span>


        <div class="ligneFormAdminCreateAccount">
            <label>Email </label>
            <input type="email" name="mail" id="mail" ng-model="mail" class="inputFormAdminCreateAccount"
                   required>
        </div>
        <span class="errorForm" ng-show="signupForm.mail.$error.required && signupForm.mail.$dirty">Champ obligatoire</span>
        <span class="errorForm"
              ng-show="!signupForm.mail.$error.required && signupForm.mail.$error.email && signupForm.mail.$dirty">Adresse mail invalide</span>


        <div class="ligneFormAdminCreateAccount">
            <label>Mot de passe</label>
            <input type="password" name="password" id="password" ng-model="password" class="inputFormAdminCreateAccount"
                   ng-minlength="8" ng-maxlength="40"
                   ng-pattern="/(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/" required>
        </div>
        <span class="errorForm" ng-show="signupForm.password.$error.required && signupForm.password.$dirty">Champ obligatoire</span>
        <span class="errorForm" ng-show="!signupForm.password.$error.minLength && !signupForm.password.$error.maxLength &&
                    signupForm.password.$error.pattern && signupForm.password.$dirty">Le mot de passe doit être formé d'au moins une majuscule, une minuscule, et au moins 1 chiffre ou caractère spécial</span>
        <span class="errorForm" ng-show="!signupForm.password.$error.required
                    && (signupForm.password.$error.minlength || signupForm.password.$error.maxlength)
                    && signupForm.password.$dirty"> Le mot de passe doit contenir 8 à 40 caractères.</span>


        <div class="ligneFormAdminCreateAccount">
            <label>Confirmation de mot de passe </label>
            <input type="password" name="passwordConfirmation" id="passwordConfirmation"
                   ng-model="passwordConfirmation"
                   ng-keyup="checkPasswords()"
                   class="inputFormAdminCreateAccount"
                   ng-minlength="8" ng-maxlength="40"
                   ng-pattern="/(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/" required>
        </div>
        <span class="errorForm"
              ng-show="signupForm.passwordConfirmation.$error.required && signupForm.passwordConfirmation.$dirty">Champ obligatoire</span>
        <span class="errorForm" ng-show="passwordsMatch">Doit être identique au mot de passe</span>


        <div class="ligneFormAdminCreateAccount">
            <label>Date de naissance </label>
            <input type="date" name="birthDate" id="birthDate" ng-model="birthDate" class="inputFormAdminCreateAccount"
                   required>
        </div>
        <span class="errorForm" ng-show="signupForm.birthDate.$error.required && signupForm.birthDate.$dirty">Champ obligatoire</span>

        <div class="checkBoxVerte">
            <input type="checkbox" name="wannaBeSupplier" id="wannaBeSupplier" ng-model="wannaBeSupplier"
                   ng-click="updateStatus()">
            <label for="wannaBeSupplier"><span class="ui"></span>L'utilisateur est fournisseur ?</label>
        </div>

        <div ng-show="wannaBeSupplier">
            <div class="radioForm">
                <input type="radio" id="personnal-choice" name="typeAccount" ng-model="typeAccount"
                       value="personal"/>
                <label for="personnal-choice">Particulier</label>
            </div>
            <div class="radioForm">
                <input type="radio" id="professionnal-choice" name="typeAccount" ng-model="typeAccount"
                       value="professional"/>
                <label for="professionnal-choice">Professionnel</label>
            </div>
        </div>

        <!--<div ng-show="wannaBeSupplier">
            <label>
                <input type="radio" name="typeAccount" ng-model="typeAccount"
                       value="personal">Particulier
            </label>
            <label>
                <input type="radio" name="typeAccount" ng-model="typeAccount"
                       value="professional">Professionnel
            </label>
        </div>-->

        <div ng-show="typeAccount == 'professional' && wannaBeSupplier">
            <div class="ligneFormAdminCreateAccount">
                <label>Nom de l'entreprise </label>
                <input type="text" name="companyName" id="companyName" ng-model="companyName" class="inputFormAdminCreateAccount"
                       ng-required="typeAccount == 'professional' && wannaBeSupplier">
            </div>
            <span class="errorForm"
                  ng-show="signupForm.companyName.$error.required && signupForm.companyName.$dirty">Champ obligatoire</span>


            <div class="ligneFormAdminCreateAccount">
                <label>Adresse de l'entreprise </label>
                <input type="text" name="companyAddress" id="companyAddress" ng-model="companyAddress"
                       class="inputFormAdminCreateAccount"
                       ng-required="typeAccount == 'professional' && wannaBeSupplier">
            </div>
            <span class="errorForm"
                  ng-show="signupForm.companyAddress.$error.required && signupForm.companyAddress.$dirty">Champ obligatoire</span>

            <div class="ligneFormAdminCreateAccount">
                <label>Numéro de SIRET</label>
                <input type="number" name="companySIRET" id="companySIRET" ng-model="siretNumber" class="inputFormAdminCreateAccount"
                       ng-required="typeAccount == 'professional' && wannaBeSupplier"  ng-minlength="14" ng-maxlength="14">
            </div>
            <!--<span class="errorForm"
                      ng-show="signupForm.companySIRET.$error.required && signupForm.companySIRET.$dirty">Champ obligatoire</span>-->

        </div>

        <div class="finForm">
            <button class="button" type="submit" value="S'inscrire"
                    ng-disabled="!signupForm.$valid">Valider
            </button>
            <a class="button" href="#/admin/userList">Retour</a>
        </div>
    </form>
</div>