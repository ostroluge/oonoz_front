<div ng-include="'views/menu.html'"></div>

<div class="contenuInline" ng-controller="ThemeListCtrl" ng-init="getThemes()">
    <div class="ThemeListTitre">Thèmes et sous-thèmes en attente de validation</div>
    <div class="ThemeListAttenteValidation">
    <div class="ThemeListTheme" ng-repeat="theme in themes">
            <div class="ThemeListUnTheme ThemeListThemeValide" ng-if="theme.validated">
                <span class="ThemeListNom">Thème {{theme.label}}</span>
                <span ng-if="theme.iconUrl != null">
                    <img class="ThemeListImg" ng-src="{{'data:image/*;base64,'+theme.iconUrl}}"/>
                </span>
            </div>
            <div class="ThemeListUnTheme" ng-if="!theme.validated">
                <span class="ThemeListNom">Thème {{theme.label}}</span>
                <span ng-if="theme.iconUrl != null">
                    <img class="ThemeListImg" ng-src="{{'data:image/*;base64,'+theme.iconUrl}}"/>
                </span>
                <button class="ThemeListBouton" ng-click="validateTheme(theme.idTheme)">
                    <img class="ThemeListIcon" src="images/checked-blanc.png">
                    Valider le thème
                </button>
                <button class="ThemeListBouton" ng-click="refuseTheme(theme.idTheme)">
                    <img class="ThemeListIcon" src="images/cross-blanc.png">
                    Refuser le thème
                </button>
            </div>
            <div class="ThemeListSousTheme" ng-repeat="subtheme in theme.subThemes">
                <div ng-if="!subtheme.validated">
                    <span class="ThemeListNom">Sous-thème {{subtheme.label}}</span>
                    <span ng-if="subtheme.iconUrl != null">
                        <img class="ThemeListImg" ng-src="{{'data:image/*;base64,'+subtheme.iconUrl}}"/>
                    </span>
                    <span ng-show="theme.validated">
                    <button class="ThemeListBouton" ng-click="validateSubTheme(theme.idTheme, subtheme.id)">
                        <img class="ThemeListIcon" src="images/checked-blanc.png">
                        Valider le sous-thème
                    </button>
                    <button class="ThemeListBouton" ng-click="refuseSubTheme(theme.idTheme, subtheme.id)">
                        <img class="ThemeListIcon" src="images/cross-blanc.png">
                        Refuser le sous-thème
                    </button>
                    </span>
                    <span ng-show="!theme.validated">Le thème doit d'abord être validé</span>
                </div>
            </div>
        </div>
    </div>
    <div class="ThemeListTitre">Thèmes et sous-thèmes validés</div>
    <div class="ThemeListValides">
        <div class="ThemeListUnTheme ThemeListLienAjout">
            <a class="ThemeListUnThemeLink" href="#/themes/new">
                <img class="ThemeListIcon" src="images/add-vert.png">
                Ajouter un thème
            </a>
        </div>
    <div class="ThemeListTheme" ng-repeat="theme in themes">
        <div class="ThemeListUnTheme" ng-if="theme.validated">
            <span class="ThemeListNom">Thème {{theme.label}}</span>
            <span ng-if="theme.iconUrl != null">
                <img class="ThemeListImg" ng-src="{{'data:image/*;base64,'+theme.iconUrl}}"/>
            </span>
            <a class="ThemeListBouton" href="#/themes/{{theme.idTheme}}/edit">
                <img class="ThemeListIcon" src="images/edit-blanc.png">
                Éditer le thème
            </a>
            <a class="ThemeListBouton" ng-href="" ng-click="deleteTheme(theme.idTheme)">
                <img class="ThemeListIcon" src="images/delete-blanc.png">
                Supprimer le thème
            </a>
        </div>
        <div class="ThemeListSousTheme" ng-repeat="subtheme in theme.subThemes">
            <div ng-if="subtheme.validated">
                <span class="ThemeListNom">Sous-thème {{subtheme.label}}</span>
                <span ng-if="subtheme.iconUrl != null">
                    <img class="ThemeListImg" ng-src="{{'data:image/*;base64,'+subtheme.iconUrl}}"/>
                </span>
                <a class="ThemeListBouton" href="#/themes/{{theme.idTheme}}/subthemes/{{subtheme.id}}/edit">
                    <img class="ThemeListIcon" src="images/edit-blanc.png">
                    Éditer le sous-thème
                </a>
                <a class="ThemeListBouton" ng-href="" ng-click="deleteSubTheme(theme.idTheme, subtheme.id)">
                    <img class="ThemeListIcon" src="images/delete-blanc.png">
                    Supprimer le sous-thème
                </a>
            </div>
        </div>
        <div ng-show="theme.validated">
            <div class="ThemeListSousTheme ThemeListLienAjout">
                <a class="ThemeListSousThemeLink" href="#/themes/{{theme.idTheme}}/subthemes/new">
                    <img class="ThemeListIcon" src="images/add-gris.png">
                    Ajouter un sous-thème
                </a>
            </div>
        </div>
    </div>
    </div>
</div>